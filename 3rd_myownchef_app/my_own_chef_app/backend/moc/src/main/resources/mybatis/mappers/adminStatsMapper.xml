<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cucook.moc.admin.dao.AdminStatsDAO">

    <!-- 탈퇴(WITHDRAW), 관리자 제외 전체 회원 수 -->
    <select id="countNonWithdrawUsers" resultType="int">
        SELECT COUNT(*)
        FROM tb_user
        WHERE NVL(UPPER(user_status), 'ACTIVE') != 'WITHDRAW'
        AND UPPER(user_type) != 'Y'
    </select>

    <!-- 미처리 신고 수 (유저 신고: tb_user_report 기준) -->
    <select id="countPendingUserReports" resultType="int">
        SELECT COUNT(*)
        FROM tb_user_report
        WHERE UPPER(processing_status_cd) = 'PENDING'
    </select>

    <!-- 미처리 신고 수 (레시피 신고: tb_recipe_report 기준) -->
    <select id="countPendingRecipeReports" resultType="int">
        SELECT COUNT(*)
        FROM tb_recipe_report
        WHERE UPPER(status_cd) = 'PENDING'
    </select>

    <!-- 관리자 여부 확인 -->
    <select id="isAdminUser" parameterType="long" resultType="int">
        SELECT COUNT(*)
        FROM tb_user
        WHERE user_id = #{adminUserId}
        AND user_type = 'Y'
    </select>

</mapper>
